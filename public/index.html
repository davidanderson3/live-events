<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
    <title>Live Events</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon.png">
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
</head>

<body>
  <section id="goalsView">
    <div id="showsPanel" class="main-layout">
      <div class="full-column">
        <div class="shows-panel-header">
          <h2>Live Events</h2>
        </div>
        <div class="shows-toolbar">
          <div class="shows-tab-buttons" role="tablist" aria-label="Live music view">
            <button type="button" id="showsTabAll" class="shows-tab-btn is-active" data-view="all" aria-selected="true">Events</button>
            <button type="button" id="showsTabSaved" class="shows-tab-btn" data-view="saved" aria-selected="false">Saved</button>
          </div>
          <div class="shows-toolbar__actions">
            <div class="shows-toolbar__control shows-toolbar__control--distance-location">
              <div class="shows-distance-group">
                <select id="showsDistanceSelect">
                  <option value="10">10 mi</option>
                  <option value="25">25 mi</option>
                  <option value="50">50 mi</option>
                  <option value="75">75 mi</option>
                  <option value="100">100 mi</option>
                  <option value="125">125 mi</option>
                  <option value="150">150 mi</option>
                </select>
                <div class="shows-location-inline">
                  <span id="showsLocationText" class="shows-location-text">&nbsp;</span>
                  <input
                    type="search"
                    id="showsLocationInput"
                    class="shows-location-input"
                    placeholder="City, address, or landmark"
                    autocomplete="off"
                    hidden
                  />
                  <button
                    type="button"
                    id="showsLocationEditButton"
                    class="shows-location-edit-btn"
                    aria-label="Edit location"
                  >
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M5 17.25V21h3.75l11.06-11.06-3.75-3.75L5 17.25zM20.71 7.04a1 1 0 000-1.41l-2.34-2.34a1 1 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                    </svg>
                  </button>
                  <button
                    type="button"
                    id="showsLocationButton"
                    class="shows-location-btn"
                    aria-label="Use my current location"
                  >
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 112.5-2.5A2.5 2.5 0 0112 11.5z" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
            <div class="shows-toolbar__control shows-toolbar__control--date">
              <label for="showsDateInput">Through</label>
              <div class="shows-date-picker">
                <input type="date" id="showsDateInput" />
              </div>
            </div>
            <div class="shows-toolbar__shortcut-group" role="group" aria-label="Quick action links">
              <a href="#" class="shows-date-chip shows-toolbar__shortcut" data-days="0">Today</a>
              <a href="#" class="shows-date-chip shows-toolbar__shortcut" data-days="7">Next 7 days</a>
              <a href="#" id="showsRefreshBtn" class="shows-discover-btn shows-toolbar__shortcut">Check for new events</a>
            </div>
          </div>
        </div>
        <div
          id="showsStatus"
          class="shows-status"
          role="status"
          aria-live="polite"
          hidden
        >
          <div class="shows-status__live-bars" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <div id="showsList" class="decision-container"></div>
      </div>
      </div>
  </section>

  <nav id="bottomNav" class="bottom-nav">
    <button type="button" id="bottomLogoutBtn" class="icon-btn">Sign In</button>
  </nav>

  <!-- Modal shown when using the bottom add button -->
  <div id="bottomAddModal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3 id="bottomAddTitle"></h3>
      <div id="bottomAddOptions" class="rating-options"></div>
      <div id="bottomAddSection" class="rating-options" style="display:none;margin-top:8px;"></div>
      <input id="bottomAddText" type="text" placeholder="Description" style="display:none;margin-top:8px;width:100%;" />
      <div class="modal-actions" style="margin-top:1em;">
        <button type="button" id="bottomAddCancel">Cancel</button>
        <button type="button" id="bottomAddSubmit">Add</button>
      </div>
    </div>
  </div>
  <div id="contactModal" class="modal" style="display:none;">
    <div class="modal-content" style="max-width:400px;width:90%;max-height:80vh;overflow:auto;">
      <h3>Contact Developer</h3>
      <form id="contactForm">
        <div style="margin-bottom:8px;">
          <label>Name<br><input type="text" id="contactName" /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label>Email<br><input type="email" id="contactEmailInput" required /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label>Message<br><textarea id="contactMessage" required style="width:100%;height:100px;"></textarea></label>
        </div>
        <div class="modal-actions" style="margin-top:1em;">
          <button type="submit">Send</button>
          <button type="button" id="contactCancelBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  <script src="https://apis.google.com/js/api.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script type="text/javascript">
    (() => {
      if (typeof window === 'undefined' || typeof window.location === 'undefined') return;
      const { protocol, host, origin } = window.location;
      if (!protocol || !host) return;
      const scheme = String(protocol).toLowerCase();
      if (!scheme.startsWith('http')) return;
      const normalizedOrigin = origin || `${scheme}//${host}`;
      if (!normalizedOrigin) return;
      const base = normalizedOrigin.replace(/\/$/, '');
      window.apiBaseUrl = base;
      window.showsEndpoint = `${base}/api/shows`;
    })();
  </script>
  <script type="module" src="js/main.js"></script>
  <script type="module" src="js/shows.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
